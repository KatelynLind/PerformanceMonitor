#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit security and code quality checks..."

# Run format check
npm run format:check || { echo "âŒ Format check failed. Run 'npm run format' to fix."; exit 1; }

# Run linters
npm run lint:sol || { echo "âŒ Solidity lint failed"; exit 1; }
npm run lint:js || { echo "âŒ JavaScript lint failed"; exit 1; }

# Run security audit
npm audit --audit-level=moderate || { echo "âš ï¸  Security vulnerabilities found"; exit 1; }

echo "âœ… All pre-commit checks passed!"
